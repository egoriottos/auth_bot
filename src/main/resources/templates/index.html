<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
<form id="authForm" action="/auth/telegram" method="post">
  <input type="hidden" name="initData" id="initData">
</form>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    if (Telegram.WebApp.initData) {
      // Отправляем POST через fetch
      fetch("/auth/telegram", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: new URLSearchParams({ initData: Telegram.WebApp.initData })
      }).then(response => window.location = "/profile");
    }
  });
</script>
</body>
</html>